(function($){var d0={key_name:'id',val_name:'name'};var c0={};var f0=[];$.fn.extend({RelativeDropdown:(function(cfg){cb=('childid' in cfg)?$(cfg.childid):$(this);fd=('fatherid' in cfg)?$(cfg.fatherid)[0]:$(this)[0];if(!(cf=f2(fd,f0))){f0[f0.length]={d2:fd,cd:[],c4:null};cf=f0[f0.length-1];b0(cf);}var cd=cf.cd;for(var i=0;i<cb.length;i++){var tmp={d2:cb[i],c5:'',cfg:$.extend({},d0,cfg,{i0:false})};if(c3=f2(cb[i],cd)){$.extend(c3,tmp);}else{cd[cd.length]=c3=tmp;}}if(('url' in cfg) && !(cfg.url in c0)){c0[cfg.url]={};}c1(cf);})});function b0(f1){$(f1.d2).change(function(){c1(f1);});}function c1(f1){f1.c4=$(f1.d2).find("option:selected").attr('value');cd=f1.cd;var r1={};for(var i=0;i<cd.length;i++){if('static_data' in cd[i].cfg){if(f1.c4 in cd[i].cfg.static_data){r0(cd[i],cd[i].cfg.static_data[f1.c4]);}else{r0(cd[i],null);}continue;}if(f1.c4.length>0){cd[i].c5=cd[i].cfg.url.replace('{0}',f1.c4);}else{cd[i].c5='';}c8=c0[cd[i].cfg.url];if(1>cd[i].c5.length){r0(cd[i],null);}else if((cd[i].c5 in c8) && c8[cd[i].c5].done){r0(cd[i],c8[cd[i].c5].msg);}else{r1[cd[i].c5]=cd[i].cfg.url;}}for(c5 in r1){url=r1[c5];if((c5 in c0[url])){continue;}c0[url][c5]={done:false,msg:null};d1(c5,url);}}function d1(c5,url){$.ajax({url:c5,type:"POST",dataType:'json',success:function(msg){c0[url][c5].msg=msg;c0[url][c5].done=true;for(var i=0;i<f0.length;i++){for(var j=0;j<f0[i].cd.length;j++){if(f0[i].cd[j].c5==c5){f0[i].cd[j].c5='';r0(f0[i].cd[j],msg);}}}}});}function r0(c6,msg){var c7="";var cfg=c6.cfg;if('empty_option' in cfg){if(typeof(cfg.empty_option)=='string'){c7="<option value=\"\">"+cfg.empty_option+"</option>";}else{c7="<option value=\""+cfg.empty_option.id+"\">"+cfg.empty_option.name+"</option>";}}if(msg){var d3=[];if(('list_name' in cfg)&&(cfg.list_name in msg)){d3=msg[cfg.list_name];}else if(toString.apply(msg)==='[object Array]'){d3=msg;}for(var i=0;i<d3.length;i++){c7+="<option value=\""+d3[i][cfg.key_name]+"\"";if(!cfg.i0 && ('init_child_val' in cfg) && cfg.init_child_val==d3[i][cfg.key_name]){c7+=" selected=\"selected\"";}if('extern_attr' in cfg){if(typeof(cfg.extern_attr)=='string'){cfg.extern_attr=[cfg.extern_attr];}for(var k=0;k<cfg.extern_attr.length;k++){c7+=" data-"+cfg.extern_attr[k]+"=\""+d3[i][cfg.extern_attr[k]]+"\"";}}c7+=">"+d3[i][cfg.val_name]+"</option>";}}$(c6.d2).html(c7);if(!cfg.i0 && ('onInit' in cfg) && typeof(cfg.onInit)=='function'){cfg.onInit($(c6.d2));}$(c6.d2).change();cfg.i0=true;}function f2(d2,arr){for(i=0;i<arr.length;i++){if(arr[i].d2==d2){return arr[i];}}return false;}})(jQuery);